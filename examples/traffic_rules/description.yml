---
institution: udelar
lab_name: traffic_rules
default_os: ubuntu22

guest_settings:
  machine1:
    entry_point: yes
    memory: 512
    cpu: 1
    disk: 10
    red_team_agent: yes
    monitor: yes
    copies: 1
  machine2:
    memory: 512
    cpu: 1
    disk: 10
    internet_access: yes
    red_team_agent: yes
    copies: 1

topology:
  - name: net1
    members:
      - machine1
  - name: net2
    members:
      - machine2
  - name: net3
    members:
      - machine2

traffic_rules: #If no traffic rules are defined then by default all traffic within the same subnet is allowed.
  - description: Allow all traffic from machine1.net1 to machine2.net2 port 80
    source: machine1.net1 #The source can be an entire network or a machine interface (<guest>.<network>)
    destination: machine2.net2 #The destination must be the interface of a machine (<guest>.<network>)
    port_range: 80 #It can be a specific port, a range of ports, or by default all ports are assumed
    protocol: tcp #It can be tcp, udp, icmp, or all. By default all is assumed
  - description: Allow all traffic from machine1.net1 to machine2.net3 port 8080-8082
    source: machine1.net1
    destination: machine2.net3
    port_range: 8080-8082
    protocol: tcp
  - description: Allow icmp traffic from machine2.net2 to machine1.net1
    source: machine2.net2 
    destination: machine1.net1
    protocol: icmp
  - description: Allow all traffic from machine2.net2 to machine1.net1
    source: net2
    destination: machine1.net1

caldera_settings:
  enable: no

elastic_settings:
  enable: no

guacamole_settings:
  enable: no

moodle_settings:
  enable: yes

