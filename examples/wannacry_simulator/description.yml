---
# ==============================================================================
# WannaCry Ransomware Simulator - Tectonic Scenario Description
# ==============================================================================
# This scenario simulates a WannaCry ransomware attack for DFIR training.
# Students will analyze encrypted files, audit logs, and forensic artifacts.
#
# Key Features:
#   - Realistic file system generation with multiple file types
#   - Real AES-256-CBC encryption (not fake/simulated)
#   - Temporal distribution for realistic timestamps
#   - PE executables with WannaCry signatures
#   - Ransom notes and forensic artifacts
#   - Auditd, entropy, and osquery analysis tools
#
# Learning Objectives:
#   1. Identify ransomware infection patterns
#   2. Analyze file entropy to detect encryption
#   3. Correlate multiple forensic data sources
#   4. Build incident response timelines
#   5. Use professional forensic tools (auditd, osquery, ent)
# ==============================================================================

# Scenario metadata (REQUIRED fields per Tectonic specification)
institution: udelar
lab_name: wannacry_simulator
default_os: ubuntu22

# Optional description shown in Tectonic info
description: |
  WannaCry Ransomware Simulation for Digital Forensics and Incident Response Training.
  
  This scenario creates a realistic infected system where students can practice
  forensic analysis techniques including:
  - Auditd log analysis for mass file operations
  - Entropy calculation to identify encrypted files
  - osquery for system artifact collection
  - Timeline reconstruction
  - Malware artifact identification (PE files, ransom notes)
  
  ⚠️  WARNING: Files are REALLY encrypted with AES-256-CBC and cannot be recovered!

# Network topology - defines which machines are connected to which networks
topology:
  - name: infected_network
    members:
      - victim
      - analyst

# Guest machines (VMs/containers)
guest_settings:
  # Victim machine that gets "infected" with WannaCry simulator
  victim:
    hostname: victim
    entry_point: yes
    memory: 2048
    vcpu: 2
    disk: 20
    base_os: ubuntu22
    internet_access: no
    copies: 1
    monitor: no
    red_team_agent: no
    blue_team_agent: no
  
  # Forensic analysis workstation (optional - for remote analysis)
  analyst:
    hostname: forensic-analyst
    entry_point: yes
    memory: 4096
    vcpu: 2
    disk: 30
    base_os: ubuntu22
    internet_access: no
    copies: 1
    monitor: no
    red_team_agent: no
    blue_team_agent: no

# ==============================================================================
# INTEGRATION NOTE: Custom Ansible Components
# ==============================================================================
# This scenario uses custom Ansible modules and roles located in:
#   - ansible/library/           (custom modules)
#   - ansible/roles/             (custom roles)
#
# Tectonic's ansible.py automatically detects these directories and sets:
#   - ANSIBLE_LIBRARY environment variable
#   - ANSIBLE_ROLES_PATH environment variable
#
# This allows the scenario to use specialized modules like:
#   - encrypt_files_aes: Real AES-256-CBC encryption
#   - generate_files_bulk: Bulk file generation
#   - generate_pe_wannacry: PE malware generation
#   - apply_temporal_distribution: Timestamp manipulation
#
# No additional configuration is needed beyond placing files in the correct
# directory structure. See README.md for detailed architecture explanation.
# ==============================================================================
